webpackJsonp([11],{216:function(e,t,a){a(789);var r=a(88)(a(556),a(815),null,null);e.exports=r.exports},236:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a(52),n=a.n(r),s=a(51),o=a.n(s),i=a(54),l=a.n(i),c=a(89),m=a(53),u=a(90);t.default={data:function(){return{baseImgPath:m.b,isActive:!1}},created:function(){this.adminInfo.id||this.getAdminData()},computed:l()({},a.i(u.b)(["adminInfo","newOrdersCount","newAgentApply","newCashApply"])),methods:l()({},a.i(u.c)(["getAdminData","getOrderCount","getAgentApplyCount","getCashApplyCount"]),{handleCommand:function(e){var t=this;return o()(n.a.mark(function r(){var s;return n.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if("home"!=e){r.next=4;break}t.$router.push("/manage"),r.next=9;break;case 4:if("singout"!=e){r.next=9;break}return r.next=7,a.i(c.e)();case 7:s=r.sent,1==s.status?(t.$message({type:"success",message:"退出成功"}),t.$router.push("/")):t.$message({type:"error",message:s.message});case 9:case"end":return r.stop()}},r,t)}))()},getNotify:function(){var e=this;return o()(n.a.mark(function t(){var a;return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:a=e,setTimeout(function(){a.getOrderCount(),a.getAgentApplyCount(),a.getCashApplyCount(),console.log("新订单"),a.isActive&&a.getNotify()},3e5);case 2:case"end":return t.stop()}},t,e)}))()},handleGoToOrder:function(e){this.$router.push({path:"orderList",query:{index:e}})},handleGoToAgent:function(e){this.$router.push({path:"agentManage",query:{index:e}})}}),activated:function(){console.log("headTop激活了"),this.isActive=!0,this.getNotify()},deactivated:function(){console.log("headTop休眠了"),this.isActive=!1}}},237:function(e,t,a){t=e.exports=a(197)(!1),t.push([e.i,".allcover{position:absolute;top:0;right:0}.ctt{left:50%;transform:translate(-50%,-50%)}.ctt,.tb{position:absolute;top:50%}.tb{transform:translateY(-50%)}.lr{position:absolute;left:50%;transform:translateX(-50%)}.header_container{background-color:#eff2f7;height:60px;display:-ms-flexbox;display:flex;-ms-flex-pack:justify;justify-content:space-between;-ms-flex-align:center;align-items:center;padding-left:20px}.avator{width:36px;height:36px;border-radius:50%;margin-right:37px}.el-dropdown-menu__item{text-align:center}",""])},238:function(e,t,a){var r=a(237);"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);a(198)("24ad6d9e",r,!0)},239:function(e,t,a){a(238);var r=a(88)(a(236),a(240),null,null);e.exports=r.exports},240:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"header_container"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/manage"}}},[e._v("首页")]),e._v(" "),e._l(e.$route.meta,function(t,r){return a("el-breadcrumb-item",{key:r},[e._v(e._s(t))])})],2),e._v(" "),e.newOrdersCount>0?a("el-badge",{staticClass:"item",attrs:{value:e.newOrdersCount,max:99}},[a("el-button",{attrs:{size:"small"},on:{click:function(t){e.handleGoToOrder(0)}}},[e._v("新订单")])],1):e._e(),e._v(" "),e.newAgentApply>0?a("el-badge",{staticClass:"item",attrs:{value:e.newAgentApply,max:99}},[a("el-button",{attrs:{size:"small"},on:{click:function(t){e.handleGoToAgent(0)}}},[e._v("新代理申请")])],1):e._e(),e._v(" "),e.newCashApply>0?a("el-badge",{staticClass:"item",attrs:{value:e.newCashApply,max:99}},[a("el-button",{attrs:{size:"small"},on:{click:function(t){e.handleGoToAgent(3)}}},[e._v("新提现申请")])],1):e._e(),e._v(" "),a("el-dropdown",{attrs:{"menu-align":"start"},on:{command:e.handleCommand}},[a("img",{staticClass:"avator",attrs:{src:e.baseImgPath+e.adminInfo.avatarUrl}}),e._v(" "),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{attrs:{command:"home"}},[e._v("首页")]),e._v(" "),a("el-dropdown-item",{attrs:{command:"singout"}},[e._v("退出")])],1)],1)],1)},staticRenderFns:[]}},556:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a(52),n=a.n(r),s=a(51),o=a.n(s),i=a(54),l=a.n(i),c=a(239),m=a.n(c),u=a(90),p=a(53),d=a(89);t.default={data:function(){return{baseUrl:p.a,baseImgPath:p.b,tableData:[],offset:0,limit:20,count:0,currentPage:1,dialogVisible:!1,memberForm:{level:0,memberName:null,discount:10,score:0},memberFormRules:{level:[{required:!0,message:"等级"}],memberName:[{required:!0,message:"缺少昵称"}],discount:[{required:!0,message:"缺少折扣"}],score:[{required:!0,message:"缺少所需积分"}]}}},components:{headTop:m.a},computed:l()({},a.i(u.b)(["adminInfo"])),created:function(){this.init()},methods:{init:function(){var e=this;return o()(n.a.mark(function t(){var r;return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.i(d.h)();case 2:r=t.sent,1==r.status&&(e.count=r.count),e.getMember();case 5:case"end":return t.stop()}},t,e)}))()},handleSizeChange:function(e){console.log("每页 "+e+" 条")},handleCurrentChange:function(e){this.currentPage=e,this.offset=(e-1)*this.limit,this.getMember()},getMember:function(){var e=this;return o()(n.a.mark(function t(){var r;return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.i(d.i)({offset:e.offset,limit:e.limit});case 2:r=t.sent,1==r.status&&(e.tableData=[],r.members.forEach(function(t){e.tableData.push(t)}));case 4:case"end":return t.stop()}},t,e)}))()},submitForm:function(e){var t=this;this.$refs[e].validate(function(){var e=o()(n.a.mark(function e(r){var s,o,i,c;return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!r){e.next=37;break}if(s=t,console.log("验证通过了"),o=l()({},s.memberForm),console.log("d"),!(t.tableData.length>0)){e.next=29;break}if(!o.memberId){e.next=26;break}if(i=s.tableData.length,!(0==o.index&&i>1)){e.next=14;break}if(!(parseInt(o.score)>=parseInt(s.tableData[1].score))){e.next=12;break}return t.$message({type:"error",message:"所需积分有误"}),e.abrupt("return",!1);case 12:e.next=24;break;case 14:if(!(o.index>0&&o.index<i-1)){e.next=20;break}if(!(parseInt(o.score)<=parseInt(s.tableData[o.index-1].score)||parseInt(o.score)>=parseInt(s.tableData[o.index+1].score))){e.next=18;break}return t.$message({type:"error",message:"所需积分有误"}),e.abrupt("return",!1);case 18:e.next=24;break;case 20:if(!(o.index>0&&o.index==i-1)){e.next=24;break}if(!(parseInt(o.score)<=parseInt(s.tableData[o.index-1].score))){e.next=24;break}return t.$message({type:"error",message:"所需积分有误"}),e.abrupt("return",!1);case 24:e.next=29;break;case 26:if(!(parseInt(o.score)<=parseInt(s.tableData[s.tableData.length-1].score))){e.next=29;break}return t.$message({type:"error",message:"所需积分有误"}),e.abrupt("return",!1);case 29:return console.log("e"),e.next=32,a.i(d.j)(o);case 32:c=e.sent,console.log("e"),1==c.status?(t.offset=0,t.limit=20,t.count+=1,t.getMember(),t.$message({type:"success",message:"添加成功"}),t.dialogVisible=!1):t.$message({type:"success",message:"添加失败"}),e.next=39;break;case 37:return t.$notify.error({title:"错误",message:"请检查输入是否正确",offset:100}),e.abrupt("return",!1);case 39:case"end":return e.stop()}},e,t)}));return function(t){return e.apply(this,arguments)}}())},submitMemberForm:function(e){var t=this;return o()(n.a.mark(function a(){return n.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:t.$refs[e].validate(function(){var e=o()(n.a.mark(function e(a){var r,s;return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!a){e.next=12;break}if(r=l()({},t.memberForm),!(t.tableData.length>0)){e.next=6;break}if(!(parseInt(r.score)<=parseInt(t.tableData[t.tableData.length-1].score))){e.next=6;break}return t.$message({type:"error",message:"所需积分有误"}),e.abrupt("return",!1);case 6:return e.next=8,addmember(r);case 8:s=e.sent,1==s.status?(t.offset=0,t.limit=20,t.count+=1,t.getMember(),t.$message({type:"success",message:"添加成功"})):t.$message({type:"success",message:"添加失败"}),e.next=13;break;case 12:t.$message({type:"error",message:"输入有误"});case 13:case"end":return e.stop()}},e,t)}));return function(t){return e.apply(this,arguments)}}());case 1:case"end":return a.stop()}},a,t)}))()},add:function(){this.dialogVisible=!0,this.memberForm={level:0,memberName:null,discount:10,score:0},this.memberForm.level=this.tableData.length>0?parseInt(this.tableData[this.tableData.length-1].level)+1:1},handleEdit:function(e,t){this.dialogVisible=!0,this.memberForm={level:e.level,memberName:e.memberName,discount:e.discount,score:e.score,memberId:e.id,index:t}}}}},570:function(e,t,a){t=e.exports=a(197)(!1),t.push([e.i,".allcover{position:absolute;top:0;right:0}.ctt{left:50%;transform:translate(-50%,-50%)}.ctt,.tb{position:absolute;top:50%}.tb{transform:translateY(-50%)}.lr{position:absolute;left:50%;transform:translateX(-50%)}.table_container{padding:20px}",""])},789:function(e,t,a){var r=a(570);"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);a(198)("4cf12783",r,!0)},815:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"fillcontain"},[a("head-top"),e._v(" "),a("div",{staticClass:"table_container"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData}},[a("el-table-column",{attrs:{prop:"level",label:"会员等级",width:"220"}}),e._v(" "),a("el-table-column",{attrs:{prop:"memberName",label:"会员昵称",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"score",label:"所需积分"}}),e._v(" "),a("el-table-column",{attrs:{prop:"discount",label:"会员权益"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"250"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){e.handleEdit(t.row,t.$index)}}},[e._v("编辑\n                    ")])]}}])})],1),e._v(" "),a("div",{staticClass:"Pagination",staticStyle:{"text-align":"left","margin-top":"10px"}},[a("el-pagination",{attrs:{"current-page":e.currentPage,"page-size":20,layout:"total, prev, pager, next",total:e.count},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),e._v(" "),a("div",{staticStyle:{display:"flex","justify-content":"center",padding:"20px"}},[a("el-button",{attrs:{type:"primary"},on:{click:e.add}},[e._v("添加")])],1),e._v(" "),a("el-dialog",{attrs:{title:"添加会员等级",visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-form",{ref:"memberForm",attrs:{model:e.memberForm,rules:e.memberFormRules}},[a("el-form-item",{attrs:{label:"会员等级","label-width":"100px",prop:"level"}},[a("el-input",{attrs:{placeholder:"输入会员等级",disabled:!0},model:{value:e.memberForm.level,callback:function(t){e.$set(e.memberForm,"level",t)},expression:"memberForm.level"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"会员昵称","label-width":"100px",prop:"memberName"}},[a("el-input",{attrs:{placeholder:"输入会员昵称"},model:{value:e.memberForm.memberName,callback:function(t){e.$set(e.memberForm,"memberName",t)},expression:"memberForm.memberName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"所需积分","label-width":"100px",prop:"score"}},[a("el-input",{attrs:{placeholder:"输入所需积分"},model:{value:e.memberForm.score,callback:function(t){e.$set(e.memberForm,"score",t)},expression:"memberForm.score"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"会员权益","label-width":"100px",prop:"discount"}},[a("el-input",{attrs:{placeholder:"输入会员折扣，如8.8表示8.8折"},model:{value:e.memberForm.discount,callback:function(t){e.$set(e.memberForm,"discount",t)},expression:"memberForm.discount"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitForm("memberForm")}}},[e._v("提交\n                ")])],1)],1)],1)],1)},staticRenderFns:[]}}});