webpackJsonp([17],{202:function(e,t,a){a(795);var n=a(88)(a(542),a(822),null,null);e.exports=n.exports},236:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(52),r=a.n(n),l=a(51),s=a.n(l),o=a(54),i=a.n(o),c=a(89),p=a(53),u=a(90);t.default={data:function(){return{baseImgPath:p.b,isActive:!1}},created:function(){this.adminInfo.id||this.getAdminData()},computed:i()({},a.i(u.b)(["adminInfo","newOrdersCount","newAgentApply","newCashApply"])),methods:i()({},a.i(u.c)(["getAdminData","getOrderCount","getAgentApplyCount","getCashApplyCount"]),{handleCommand:function(e){var t=this;return s()(r.a.mark(function n(){var l;return r.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if("home"!=e){n.next=4;break}t.$router.push("/manage"),n.next=9;break;case 4:if("singout"!=e){n.next=9;break}return n.next=7,a.i(c.e)();case 7:l=n.sent,1==l.status?(t.$message({type:"success",message:"退出成功"}),t.$router.push("/")):t.$message({type:"error",message:l.message});case 9:case"end":return n.stop()}},n,t)}))()},getNotify:function(){var e=this;return s()(r.a.mark(function t(){var a;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:a=e,setTimeout(function(){a.getOrderCount(),a.getAgentApplyCount(),a.getCashApplyCount(),console.log("新订单"),a.isActive&&a.getNotify()},3e5);case 2:case"end":return t.stop()}},t,e)}))()},handleGoToOrder:function(e){this.$router.push({path:"orderList",query:{index:e}})},handleGoToAgent:function(e){this.$router.push({path:"agentManage",query:{index:e}})}}),activated:function(){console.log("headTop激活了"),this.isActive=!0,this.getNotify()},deactivated:function(){console.log("headTop休眠了"),this.isActive=!1}}},237:function(e,t,a){t=e.exports=a(197)(!1),t.push([e.i,".allcover{position:absolute;top:0;right:0}.ctt{left:50%;transform:translate(-50%,-50%)}.ctt,.tb{position:absolute;top:50%}.tb{transform:translateY(-50%)}.lr{position:absolute;left:50%;transform:translateX(-50%)}.header_container{background-color:#eff2f7;height:60px;display:-ms-flexbox;display:flex;-ms-flex-pack:justify;justify-content:space-between;-ms-flex-align:center;align-items:center;padding-left:20px}.avator{width:36px;height:36px;border-radius:50%;margin-right:37px}.el-dropdown-menu__item{text-align:center}",""])},238:function(e,t,a){var n=a(237);"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);a(198)("24ad6d9e",n,!0)},239:function(e,t,a){a(238);var n=a(88)(a(236),a(240),null,null);e.exports=n.exports},240:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"header_container"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/manage"}}},[e._v("首页")]),e._v(" "),e._l(e.$route.meta,function(t,n){return a("el-breadcrumb-item",{key:n},[e._v(e._s(t))])})],2),e._v(" "),e.newOrdersCount>0?a("el-badge",{staticClass:"item",attrs:{value:e.newOrdersCount,max:99}},[a("el-button",{attrs:{size:"small"},on:{click:function(t){e.handleGoToOrder(0)}}},[e._v("新订单")])],1):e._e(),e._v(" "),e.newAgentApply>0?a("el-badge",{staticClass:"item",attrs:{value:e.newAgentApply,max:99}},[a("el-button",{attrs:{size:"small"},on:{click:function(t){e.handleGoToAgent(0)}}},[e._v("新代理申请")])],1):e._e(),e._v(" "),e.newCashApply>0?a("el-badge",{staticClass:"item",attrs:{value:e.newCashApply,max:99}},[a("el-button",{attrs:{size:"small"},on:{click:function(t){e.handleGoToAgent(3)}}},[e._v("新提现申请")])],1):e._e(),e._v(" "),a("el-dropdown",{attrs:{"menu-align":"start"},on:{command:e.handleCommand}},[a("img",{staticClass:"avator",attrs:{src:e.baseImgPath+e.adminInfo.avatarUrl}}),e._v(" "),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{attrs:{command:"home"}},[e._v("首页")]),e._v(" "),a("el-dropdown-item",{attrs:{command:"singout"}},[e._v("退出")])],1)],1)],1)},staticRenderFns:[]}},542:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(52),r=a.n(n),l=a(51),s=a.n(l),o=a(54),i=a.n(o),c=a(239),p=a.n(c),u=a(89),d=a(53),m=a(90);t.default={data:function(){return{newApply:{tableData:[],currentRow:null,offset:0,limit:20,count:0,currentPage:1,expendRow:[]},apply:{tableData:[],currentRow:null,offset:0,limit:20,count:0,currentPage:1,expendRow:[]},agent:{tableData:[],currentRow:null,offset:0,limit:20,count:0,currentPage:1,expendRow:[]},newCash:{tableData:[],currentRow:null,offset:0,limit:20,count:0,currentPage:1,expendRow:[]},cash:{tableData:[],currentRow:null,offset:0,limit:20,count:0,currentPage:1,expendRow:[]},name:"newApply",index:0}},components:{headTop:p.a},created:function(){this.initData()},mounted:function(){},computed:i()({},a.i(m.b)(["newAgentApply","newCashApply"])),methods:i()({},a.i(m.c)(["setAgentApply","setCashApply"]),{initData:function(){var e=this;return s()(r.a.mark(function t(){var a;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:a=e.$route.query.index||0,e.index=a,t.t0=a,t.next=0===t.t0?5:1===t.t0?7:2===t.t0?9:3===t.t0?11:4===t.t0?13:15;break;case 5:return e.name="newApply",t.abrupt("break",17);case 7:return e.name="agentApply",t.abrupt("break",17);case 9:return e.name="agent",t.abrupt("break",17);case 11:return e.name="newCash",t.abrupt("break",17);case 13:return e.name="cashApply",t.abrupt("break",17);case 15:return e.name="newApply",t.abrupt("break",17);case 17:try{e.getApplyCount(a),e.getAgentApply(a)}catch(e){console.log("获取数据失败",e)}case 19:case"end":return t.stop()}},t,e)}))()},handleSizeChange:function(e){console.log("每页 "+e+" 条")},newApplyHandleCurrentChange:function(e){this.newApply.currentPage=e,this.newApply.offset=(e-1)*this.newApply.limit,this.getAgentApply(0)},applyHandleCurrentChange:function(e){this.apply.currentPage=e,this.apply.offset=(e-1)*this.apply.limit,this.getAgentApply(1)},agentHandleCurrentChange:function(e){this.collect.currentPage=e,this.collect.offset=(e-1)*this.collect.limit,this.getAgentApply(2)},newCashHandleCurrentChange:function(e){this.newCash.currentPage=e,this.newCash.offset=(e-1)*this.newCash.limit,this.getAgentApply(3)},cashHandleCurrentChange:function(e){this.cash.currentPage=e,this.cash.offset=(e-1)*this.cash.limit,this.getAgentApply(4)},handleVerify:function(e,t,a,n){var r=this;this.$msgbox({title:"提示",message:"确认操作？",showCancelButton:!0,confirmButtonText:"确定",cancelButtonText:"取消",beforeClose:function(l,s,o){if("confirm"===l){var i={};i=1==n?{applyId:e.id,status:t}:{cashId:e.id,status:t},r.verifyApply(i,a,n),o()}else r.$message({type:"info",message:"取消"}),o()}})},handleAgentStatus:function(e,t,a){var n=this;this.$msgbox({title:"提示",message:"确认操作？",showCancelButton:!0,confirmButtonText:"确定",cancelButtonText:"取消",beforeClose:function(r,l,s){"confirm"===r?(n.agentStatus({agentId:e.id,status:t},a),s()):(n.$message({type:"info",message:"取消"}),s())}})},handleDown:function(e){var t=document.createElement("a");t.download=e.realName,t.style.display="none",t.href=d.a+"/v1/download/qr/?agentId="+e.id,document.body.appendChild(t),t.click(),document.body.removeChild(t)},agentStatus:function(e,t){var n=this;return s()(r.a.mark(function l(){var s,o;return r.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return s=e,r.next=3,a.i(u.E)(e);case 3:o=r.sent,1==o.status?(console.log(e),console.log(s.status),console.log(t),console.log(n.agent.tableData[t]),n.agent.tableData[t].status=s.status,n.$message({type:"success",message:"操作成功"})):n.$message({type:"error",message:"操作失败"});case 5:case"end":return r.stop()}},l,n)}))()},verifyApply:function(e,t,n){var l=this;return s()(r.a.mark(function s(){var o;return r.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,a.i(u.F)(e);case 2:o=r.sent,1==o.status?1==n?(l.newApply.tableData.splice(t,1),l.newApply.count=l.newApply.count-1,l.setAgentApply(l.newAgentApply-1>0?l.newAgentApply-1:0),l.$message({type:"success",message:"操作成功"})):2==n&&(l.newCash.tableData.splice(t,1),l.newCash.count=l.newCash.count-1,l.setCashApply(l.newCashApply-1>0?l.newCashApply-1:0),l.$message({type:"success",message:"操作成功"})):1==n?l.$message({type:"error",message:"操作失败"}):l.$message({type:"error",message:o.message||"操作失败"});case 4:case"end":return r.stop()}},s,l)}))()},getAgentApply:function(e){var t=this;return s()(r.a.mark(function n(){var l,s,o,i;return r.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return l=0,s=20,0===e?(l=t.newApply.offset,s=t.newApply.limit):1===e?(l=t.apply.offset,s=t.apply.limit):2===e&&(l=t.agent.offset,s=t.agent.limit),n.next=5,a.i(u.G)({offset:l,limit:s,index:e});case 5:o=n.sent,i=[],1==o.status&&(0==e||1==e?(o.applys.forEach(function(e){var t={};t.id=e.id,t.realName=e.realName,t.phoneNum=e.phoneNum,t.status=e.status,t.user_id=e.user_id,t.gender=e.gender,t.city=e.city,t.province=e.province,t.avatarUrl=e.avatarUrl,t.statusDesc=1==e.status?"已通过":2==e.status?"已拒绝":"未审核",i.push(t)}),0==e?t.newApply.tableData=i:t.apply.tableData=i):2==e?(o.applys.forEach(function(e,t){var a={};a.id=e.id,a.realName=e.realName,a.phoneNum=e.phoneNum,a.status=e.status,a.user_id=e.user_id,a.total=e.total,a.residue=e.residue,a.firstFans=e.firstFans,a.secondFans=e.secondFans,a.avatarUrl=e.avatarUrl,i.push(a)}),t.agent.tableData=i):3!=e&&4!=e||o.applys.forEach(function(a){var n={};n.id=a.id,n.realName=a.name,n.phoneNum=a.phoneNum,n.status=a.status,n.agentId=a.agent_id,n.cash=a.cash,n.wxCode=a.wxCode,n.applyTime=a.applyTime,n.avatarUrl=a.agent__avatarUrl,n.statusDesc=0==a.status?"未审核":1==a.status?"已通过":"未通过",i.push(n),3==e?t.newCash.tableData=i:t.cash.tableData=i}));case 8:case"end":return n.stop()}},n,t)}))()},getApplyCount:function(e){var t=this;return s()(r.a.mark(function n(){var l;return r.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,a.i(u.c)({count:e});case 2:l=n.sent,1==l.status&&(0==e?t.newApply.count=l.count:1==e?t.apply.count=l.count:2==e?t.agent.count=l.count:3==e?t.newCash.count=l.count:4==e&&(t.cash.count=l.count));case 4:case"end":return n.stop()}},n,t)}))()},handleClick:function(e,t){this.getAgentApply(e.index),this.getApplyCount(e.index),this.index=e.index,this.name=e.name},expand:function(){}})}},576:function(e,t,a){t=e.exports=a(197)(!1),t.push([e.i,".allcover{position:absolute;top:0;right:0}.ctt{left:50%;transform:translate(-50%,-50%)}.ctt,.tb{position:absolute;top:50%}.tb{transform:translateY(-50%)}.lr{position:absolute;left:50%;transform:translateX(-50%)}.table_container{padding:20px}.demo-table-expand{font-size:0}.demo-table-expand label{width:90px;color:#99a9bf}.demo-table-expand .el-form-item{margin-right:0;margin-bottom:0;width:50%}",""])},795:function(e,t,a){var n=a(576);"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);a(198)("86af0924",n,!0)},822:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"fillcontain"},[a("head-top"),e._v(" "),a("el-row",[a("el-tabs",{attrs:{type:"border-card"},on:{"tab-click":e.handleClick},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}},[a("el-tab-pane",{attrs:{label:"新申请",name:"newApply"}},[a("div",{staticClass:"table_container"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.newApply.tableData,"expand-row-keys":e.newApply.expendRow,"row-key":function(e){return e.index}}},[a("el-table-column",{attrs:{label:"头像",prop:"avatarUrl"},scopedSlots:e._u([{key:"default",fn:function(e){return[a("img",{staticStyle:{width:"30px",height:"30px","border-radius":"50%"},attrs:{src:e.row.avatarUrl}})]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"申请人",prop:"realName"}}),e._v(" "),a("el-table-column",{attrs:{label:"电话",prop:"phoneNum"}}),e._v(" "),a("el-table-column",{attrs:{label:"性别",prop:"gender"}}),e._v(" "),a("el-table-column",{attrs:{label:"省份",prop:"province"}}),e._v(" "),a("el-table-column",{attrs:{label:"城市",prop:"city"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"260"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"small"},on:{click:function(a){e.handleVerify(t.row,1,t.$index,1)}}},[e._v("允许\n                                ")]),e._v(" "),a("el-button",{attrs:{size:"small",type:"danger"},on:{click:function(a){e.handleVerify(t.row,2,t.$index,1)}}},[e._v("拒绝\n                                ")])]}}])})],1),e._v(" "),a("div",{staticClass:"Pagination"},[a("el-pagination",{attrs:{"current-page":e.newApply.currentPage,"page-size":20,layout:"total, prev, pager, next",total:e.newApply.count},on:{"size-change":function(t){e.handleSizeChange(1)},"current-change":e.newApplyHandleCurrentChange}})],1)],1)]),e._v(" "),a("el-tab-pane",{attrs:{label:"代理申请",name:"agentApply"}},[a("div",{staticClass:"table_container"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.apply.tableData,"expand-row-keys":e.apply.expendRow,"row-key":function(e){return e.index}}},[a("el-table-column",{attrs:{label:"头像",prop:"avatarUrl"},scopedSlots:e._u([{key:"default",fn:function(e){return[a("img",{staticStyle:{width:"30px",height:"30px","border-radius":"50%"},attrs:{src:e.row.avatarUrl}})]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"申请人",prop:"realName"}}),e._v(" "),a("el-table-column",{attrs:{label:"电话",prop:"phoneNum"}}),e._v(" "),a("el-table-column",{attrs:{label:"性别",prop:"gender"}}),e._v(" "),a("el-table-column",{attrs:{label:"省份",prop:"province"}}),e._v(" "),a("el-table-column",{attrs:{label:"城市",prop:"city"}}),e._v(" "),a("el-table-column",{attrs:{label:"状态",prop:"statusDesc"}})],1),e._v(" "),a("div",{staticClass:"Pagination"},[a("el-pagination",{attrs:{"current-page":e.apply.currentPage,"page-size":20,layout:"total, prev, pager, next",total:e.apply.count},on:{"size-change":e.handleSizeChange,"current-change":e.applyHandleCurrentChange}})],1)],1)]),e._v(" "),a("el-tab-pane",{attrs:{label:"代理人",name:"agent"}},[a("div",{staticClass:"table_container"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.agent.tableData,"expand-row-keys":e.agent.expendRow,"row-key":function(e){return e.index}}},[a("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-form",{staticClass:"demo-table-expand",attrs:{"label-position":"left",inline:""}},[a("el-form-item",{attrs:{label:"电话号码"}},[a("span",[e._v(e._s(t.row.phoneNum))])]),e._v(" "),a("el-form-item",{attrs:{label:"一级粉丝"}},[a("span",[e._v(e._s(t.row.firstFans))])]),e._v(" "),a("el-form-item",{attrs:{label:"二级粉丝"}},[a("span",[e._v(e._s(t.row.secondFans))])])],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"头像",prop:"avatarUrl"},scopedSlots:e._u([{key:"default",fn:function(e){return[a("img",{staticStyle:{width:"30px",height:"30px","border-radius":"50%"},attrs:{src:e.row.avatarUrl}})]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"代理人",prop:"realName"}}),e._v(" "),a("el-table-column",{attrs:{label:"收益总额",prop:"total"}}),e._v(" "),a("el-table-column",{attrs:{label:"收益余额",prop:"residue"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"360"},scopedSlots:e._u([{key:"default",fn:function(t){return[1!=t.row.status?a("el-button",{attrs:{size:"small"},on:{click:function(a){e.handleAgentStatus(t.row,1,t.$index)}}},[e._v("开始代理\n                                ")]):e._e(),e._v(" "),2!=t.row.status?a("el-button",{attrs:{size:"small",type:"danger"},on:{click:function(a){e.handleAgentStatus(t.row,2,t.$index)}}},[e._v("停止代理\n                                ")]):e._e(),e._v(" "),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(a){e.handleDown(t.row)}}},[e._v("下载二维码\n                                ")])]}}])})],1),e._v(" "),a("div",{staticClass:"Pagination"},[a("el-pagination",{attrs:{"current-page":e.agent.currentPage,"page-size":20,layout:"total, prev, pager, next",total:e.agent.count},on:{"size-change":e.handleSizeChange,"current-change":e.agentHandleCurrentChange}})],1)],1)]),e._v(" "),a("el-tab-pane",{attrs:{label:"新提现申请",name:"newCash"}},[a("div",{staticClass:"table_container"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.newCash.tableData,"expand-row-keys":e.newCash.expendRow,"row-key":function(e){return e.index}}},[a("el-table-column",{attrs:{label:"头像",prop:"avatarUrl"},scopedSlots:e._u([{key:"default",fn:function(e){return[a("img",{staticStyle:{width:"30px",height:"30px","border-radius":"50%"},attrs:{src:e.row.avatarUrl}})]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"申请人",prop:"realName"}}),e._v(" "),a("el-table-column",{attrs:{label:"电话",prop:"phoneNum"}}),e._v(" "),a("el-table-column",{attrs:{label:"性别",prop:"gender"}}),e._v(" "),a("el-table-column",{attrs:{label:"省份",prop:"province"}}),e._v(" "),a("el-table-column",{attrs:{label:"城市",prop:"city"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"260"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"small"},on:{click:function(a){e.handleVerify(t.row,1,t.$index,2)}}},[e._v("允许\n                                ")]),e._v(" "),a("el-button",{attrs:{size:"small",type:"danger"},on:{click:function(a){e.handleVerify(t.row,2,t.$index,2)}}},[e._v("拒绝\n                                ")])]}}])})],1),e._v(" "),a("div",{staticClass:"Pagination"},[a("el-pagination",{attrs:{"current-page":e.newApply.currentPage,"page-size":20,layout:"total, prev, pager, next",total:e.newApply.count},on:{"size-change":function(t){e.handleSizeChange(1)},"current-change":e.newCashHandleCurrentChange}})],1)],1)]),e._v(" "),a("el-tab-pane",{attrs:{label:"提现申请",name:"cashApply"}},[a("div",{staticClass:"table_container"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.cash.tableData,"expand-row-keys":e.cash.expendRow,"row-key":function(e){return e.index}}},[a("el-table-column",{attrs:{label:"头像",prop:"avatarUrl"},scopedSlots:e._u([{key:"default",fn:function(e){return[a("img",{staticStyle:{width:"30px",height:"30px","border-radius":"50%"},attrs:{src:e.row.avatarUrl}})]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"申请人",prop:"realName"}}),e._v(" "),a("el-table-column",{attrs:{label:"电话",prop:"phoneNum"}}),e._v(" "),a("el-table-column",{attrs:{label:"微信",prop:"wxCode"}}),e._v(" "),a("el-table-column",{attrs:{label:"金额",prop:"cash"}}),e._v(" "),a("el-table-column",{attrs:{label:"申请时间",prop:"applyTime"}}),e._v(" "),a("el-table-column",{attrs:{label:"状态",prop:"statusDesc"}})],1),e._v(" "),a("div",{staticClass:"Pagination"},[a("el-pagination",{attrs:{"current-page":e.cash.currentPage,"page-size":20,layout:"total, prev, pager, next",total:e.cash.count},on:{"size-change":function(t){e.handleSizeChange(1)},"current-change":e.cashHandleCurrentChange}})],1)],1)])],1)],1)],1)},staticRenderFns:[]}}});